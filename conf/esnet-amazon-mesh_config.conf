##########################################################################################
# Mesh Config file for Regular testing
#
##

description ESnet Amazon Testing 

<administrator>
  name       Andy Lake
  email      andy@es.net
</administrator>

##########################################################################################
# Organizations
##

## ESnet
<organization>
    description 	ESnet Amazon Testing
    
    <site>

        <host>
              description ESnet Amazon VM 
              address 54.83.41.28
              address 10.231.16.14
              <measurement_archive>
                  type        perfsonarbuoy/bwctl
                  read_url    http://54.83.41.28:8085/esmond/perfsonar/archive 
                  write_url   http://10.231.16.14/esmond/perfsonar/archive
              </measurement_archive>
        </host>
        
    </site>
    
    <site>

        <host>
              description lbl-pt1.es.net
              address lbl-pt1.es.net
              address lbl-pt1-v6.es.net
              no_agent 1
              <measurement_archive>
                  type        perfsonarbuoy/bwctl
                  read_url    http://lbl-pt1.es.net:8085/perfSONAR_PS/services/pSB
                  write_url   lbl-pt1.es.net:8570
              </measurement_archive>
              <measurement_archive>
                  type        traceroute
                  read_url    http://lbl-pt1.es.net:8086/perfSONAR_PS/services/tracerouteMA
                  write_url   http://lbl-pt1.es.net:8086/perfSONAR_PS/services/tracerouteCollector
              </measurement_archive>
        </host>
        
    </site>
    
     <site>

        <host>
              description bost-pt1.es.net
              address bost-pt1.es.net
              address bost-pt1-v6.es.net
              no_agent 1
              <measurement_archive>
                  type        perfsonarbuoy/bwctl
                  read_url    http://bost-pt1.es.net:8085/perfSONAR_PS/services/pSB
                  write_url   bost-pt1.es.net:8570
              </measurement_archive>
              <measurement_archive>
                  type        traceroute
                  read_url    http://bost-pt1.es.net:8086/perfSONAR_PS/services/tracerouteMA
                  write_url   http://bost-pt1.es.net:8086/perfSONAR_PS/services/tracerouteCollector
              </measurement_archive>
        </host>

    </site>
    
        <site>

        <host>
              description bois-pt1.es.net
              address bois-pt1.es.net
              address bois-pt1-v6.es.net
              no_agent 1
              <measurement_archive>
                  type        perfsonarbuoy/bwctl
                  read_url    http://bois-pt1.es.net:8085/perfSONAR_PS/services/pSB
                  write_url   bois-pt1.es.net:8570
              </measurement_archive>
              <measurement_archive>
                  type        traceroute
                  read_url    http://bois-pt1.es.net:8086/perfSONAR_PS/services/tracerouteMA
                  write_url   http://bois-pt1.es.net:8086/perfSONAR_PS/services/tracerouteCollector
              </measurement_archive>
        </host>

    </site>
</organization>

##########################################################################################
# Test specifications
##
<test_spec bwctl_6h_iperf3_test_scavenger>
  # Define a test spec for testing achievable bandwidth once every 6 hours
  type              perfsonarbuoy/bwctl  # Perform a bwctl test (i.e. achievable bandwidth)
  tool              bwctl/iperf3          # Use 'iperf' to do the bandwidh test
  protocol          tcp                  # Run a TCP bandwidth test
  interval          21600                # Run the test every 6 hours
  duration          20                   # Perform a 20 second test
  tos_bits          32			 # use scavenger service
  force_bidirectional 1                  # do bidirectional test
  random_start_percentage 10             # randomize start time
</test_spec>


##########################################################################################
# Groups
##
<group bwctl_aws_group>
    type       disjoint
    
    a_member     10.231.16.14 
    
    b_member     bois-pt1.es.net
    b_member     bost-pt1.es.net
    b_member     lbl-pt1.es.net
</group>


##########################################################################################
# Tests
##
<test>
  description       ESnet Amazon Throughput Testing 
  group             bwctl_aws_group
  test_spec         bwctl_6h_iperf3_test_scavenger 
</test>
